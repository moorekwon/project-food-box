{% extends 'main/base.html' %}

{% block title %}
<title>Foodbock fridge page</title>
{% endblock %}

{% block style %}
<style>
    .w3-button {
        border: none;
        display: inline-block;
        padding: 8px 16px;
        vertical-align: middle;
        overflow: hidden;
        text-decoration: none;
        color: #f8f9fa;
        background-color: #343a40;
        text-align: center;
        cursor: pointer;
        white-space: nowrap;

        -webkit-touch-callout: none;
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;

        font-size: 30px;
        position: fixed;
        right: 6%;
        bottom: 10%;
        width: 60px;
        z-index: 1;
    }

    .w3-button:hover {
        color: #000!important;
        background-color: #ccc!important;
    }

    .w3-circle {
        border-radius: 50%;
    }

    .w3-container:before, .w3-container:after {
        content: "";
        display: table;
        clear: both;
    }

    .w3-container {
        width: 1em;
        height: 1em;
        display: inline-block;
        vertical-align: text-top;
        padding: 0;
        margin: 0 0 0 4px;
    }

    .green {
        background-color: #92B558;
    }

    .yellow {
         background-color: #f6d155;
    }

    .red {
        background-color: #f2552c;
    }



</style>
{% endblock %}

{% block content %}
{% if user.is_authenticated %}
<a href="{% url 'main:fridge-add' %}" class="w3-button w3-circle">+</a>

<p class="lead mt-4" style="text-align: center; font-size: 0.9rem; line-height: 2;">
    칼로리 100g 기준<br>
    신선도 높음 <span class="mr-3 w3-container green"></span> 보통 <span class="mr-3 w3-container yellow"></span> 낮음 <span
        class="mr-3 w3-container red"></span>
</p>

{% if not my_stored_ingredients %}
<div class="container my-5 py-5">
    <div class="row justify-content-center align-items-center">
        <div class="col-md-8 col-lg-7">
            <p class="font-weight-medium text-center text-xs text-white text-muted animate"
               data-toggle="animation" data-animation="fadeUp" data-animation-order="0" data-animation-trigger="load">
                안녕하세요 {{ request.user }}님!
            </p>
            <p class="font-weight-medium text-center text-xs text-white text-muted animate"
               data-toggle="animation" data-animation="fadeUp" data-animation-order="0" data-animation-trigger="load">
                냉장고에 있는 음식 재료들을 추가하여 관리해 보세요!
            </p>
        </div>
    </div>
</div>
{% endif %}

{% if my_stored_ingredients %}
<div class="my-5">
    <div class="d-flex mb-4">
        <h2 class="mb-0">냉동실</h2>
    </div>

    <ul class="row row-cols-3 row-cols-sm-4 row-cols-lg-6 row-cols-xl-8 list-unstyled list py-4 m-0">
        {% for my_stored_ingredient in my_stored_ingredients %}
        {% if my_stored_ingredient.ingredient.fridger == 'F' %}
        <li class="col mb-4">
            <a href="" class="close">
                <span aria-hidden="true">&times;</span>
            </a>

            <div class="bg-light text-center rounded">
                <img src="{{ my_stored_ingredient.ingredient.image.url }}" alt="" class="bi bi-alarm-fill" width="100em"
                     height="100em">
            </div>

            <div class="name text-muted text-center">
                <div>
                    <span>{{ my_stored_ingredient.ingredient.name }}</span>
                </div>
                <div class="border-bottom border-gray">
                    <p class="mb-0 small">
                        {% if my_stored_ingredient.freshness == '신선도 위험' %}
                        <strong class="text-gray-dark"> {{ my_stored_ingredient.freshness }} <span
                                class="w3-container red"></span></strong><br>
                        <span class="text-danger">({{ my_stored_ingredient.left_days }}일 지남)</span>
                        {% elif my_stored_ingredient.freshness == '신선도 높음' %}
                        <strong class="text-gray-dark"> {{ my_stored_ingredient.freshness }} <span
                                class="w3-container green"></span></strong><br>
                        <span>({{ my_stored_ingredient.left_days }}일 남음)</span>
                        {% elif my_stored_ingredient.freshness == '신선도 보통' %}
                        <strong class="text-gray-dark"> {{ my_stored_ingredient.freshness }} <span
                                class="w3-container yellow"></span></strong><br>
                        <span>({{ my_stored_ingredient.left_days }}일 남음)</span>
                        {% else %}
                        <strong class="text-gray-dark"> {{ my_stored_ingredient.freshness }} <span
                                class="w3-container red"></span></strong><br>
                        <span>({{ my_stored_ingredient.left_days }}일 남음)</span>
                        {% endif %}
                    </p>
                    <p class="mb-0 small">
                        <strong class="text-gray-dark">{{ my_stored_ingredient.ingredient.kcalories }} kcal</strong>
                    </p>
                </div>
            </div>
        </li>
        {% endif %}
        {% endfor %}
    </ul>
</div>
{% endif %}
{% endif %}
{% endblock %}